# Heuristic Functions 

We will consider how the accuracuy of heuristic functions affects the overall search performance. 

Consider an 8-Puzzle, there is a 3 X 3 Grid in which 8 squares a populated with tiles that should be moved to the correct position after mixing them up. Tiles can be moved either horizontally or vertically. 

In this kind of puzzle ther are 9!/2 reachable states. 

9!/2 = 181,400

This means that a search could keep that all in memory fairly easily. 

For a 15 puzzly however, (8X8 Grid) there are:

116!/2 = over 10 Trillion.

This means to search that space would require a good heuristic function. 

Here are two commonly used candidates: 

- h1 = The number of misplaced tiles (not including blank) 
  - If all 8 tiles were in an incorrect startin position the answer would be h1 = 8 
  - If 2 of the 8 tiles were in incorrect starting positions then the answer would be h1 = 2
- h2 = The sum of the distances of the tiles from their goal positions. 
  - As tiles can only move horizontally or vertically dustance is the sum of both horizontal and vertical distance from the tiles goal state. 
    - This is sometimes called **city block distance** or **manhattan distance**

## THe effect of heuristic accuracy on performance 

A way to characterize the quality of a heristic is the **effective branching factor** b*. 

If the total number of nodes generated by A* for a particular problem is N and the solution depth is d, then b* is the branching factor that a uniform tree of depth d would have to have in order to contain N + 1 nodes. Thus: 

N + 1 = 1 + b* + (b*)^2 +..._ (b*)^d

An example woul be if A* finds a solution at depth 5, using 52 nodes, 
This means the effective branching factor is 1.92 

**(Work this out for yourself so you understand the calculation)**

## Effective depth 

Korf and Reid (1998) argue that a better way to characterize the effect of A* pruning with a given heuristic h is that it reduces the **effective depth** by a constant Kh compared to true depth. 

This means that the total serach cost is 

O(b^d-Kh) compared to O(b^d) for an uninformed search. 

h2 is generally considered a better solution for the 8-puzzle problem than h1 and comes out mroe effective in the tests the the author did. You can see the results on **page 117**

## Generating Heuristics from Relaxed Problems 

If the rules were changed so that a tile could move anywhere instead of just to th eadjacent empty square then h1 would give the xact length of the shortest solution. 

SImilarly, if a tile could move one square in any direction, even onto an occupied sqare, then h2 sould give the exact length of the shortest solution. 

A problem with fewer restrictions on the action is called a **relaxed problem**. 

The statespace graph of a relaxed problem is called a **supergraph** of the original state space. This is because the removal of restirictions creates added edges in the graph.

A relaxed problem may have better solutions if the added edges provide shortucts. 

Hence the cost of an optimal solution to a relazed problem is an admissible heuristic for the original problem. 

Furthermore because the derived heuristic is an exact cost for the relaxed problem, it must obey the triangle inequality and is therefore consistent (see page 106)

Triangle inequality is that side 3 of a triangle cannot be more than the sum of side 1 and side two. 

By writing down a problem definition it is possible to construct relaxed problems automatically: 

A tile can move from sqaure X to sqare Y if X is adjacent and Y is not blank 

3 relaxed problems based on this problem 

- A tile can move from square X to sqare Y if X is adjacent to Y and Y is adjacent to X 
- A tile can move from square C to Sqare Y if Y is blank 
- A tile can move from square X to square Y 

A program called **ABSOLVER** can generate heuristics automatically from problem definitions, using the "relaxed problem" method and various other techniques. 

**Reasearch ABSOLVER**

Admissible heuristic is one that never overestimates the cost of reaching the goal stae. 

## Generating Heuristics fron Sub Problems: Pattern Databases

Admissible Heuristics can also be derived from the solution cost of a subproblem of a given problem.

A sub problemcould be only worrying about a specific number of tiles in the 8-puzzle problem, rather than all 8 tiles.

## Pattern Databases

Pattern databases store the exact solution ocsts for every possible subproblem instance. 

In our example, every possible configuration of the four tiles and the blank.

This means there would be 15,120 patthers in the database (9*8*7*6*5). The identities of the other tiles are irrelavent, but the moves of those tiles are not counted toward the solution of the subproblem

From this we compute an admissible heuristic: Hdb for each state encountered during a search simply by looking at the corresponding subproblem configuration in the database. 

The database itself is encountered by searching back from the goal and recording the cost of each new patter encountered. 

The expense of this search is amortized over subsequent problem instances, and so makes snese if we expect to be asked to solve many problems 


The choice of tiles 1-2-3-4 to go with the blank is fairly arbitrary; we could also construct databases for 5-6-7-8, for 2-4-6-8, and so on. Each database yields an admissible heuristic, and these heuristics can be combined, as explained earlier, by taking the maximum value.

A combined heuristic of this kind is much more accurate than the Manhattan distance; 

However, with each additional database there are diminishing returns and increased memory and computation costs. 

